═══════════════════════════════════════════════════════════════
                 CLICKER GAME MANAGER 의사코드
═══════════════════════════════════════════════════════════════

■ 전역 변수 및 설정
───────────────────────────────────────────────────────────────
싱글톤 인스턴스 (전역 접근 가능)

[경제 시스템]
- 현재 보유 돈
- 클릭당 증가 금액
- 클릭 강화 레벨
- 클릭 강화 비용

[UI 참조]
- 돈 표시 텍스트
- 직원 수 표시 텍스트
- 가격 패널 (업그레이드 정보)
- 고용 패널 (직원 고용 정보)
- 업그레이드 버튼
- 고용 버튼

[프리팹 참조]
- 돈 이펙트 프리팹 (클릭시 생성)
- 직원 프리팹
- 층 프리팹

[직원 설정]
- 현재 직원 수
- 직원당 자동 수익 증가량
- 직원 고용 비용
- 가로 배치 개수 (한 줄에 몇 명)
- 직원 간 간격

[층 설정]
- 층 간 간격
- 층당 수용 가능 직원 수
- 현재 층 번호

[캐시 변수]
- 메인 카메라
- 보스(기준점) 위치


═══════════════════════════════════════════════════════════════
■ 초기화 단계
═══════════════════════════════════════════════════════════════

▶ Awake() - 게임 시작 시 1회 실행
───────────────────────────────────────────────────────────────
1. 싱글톤 설정하기()
   만약 (이미 다른 GameManager가 존재한다면)
      현재 오브젝트 삭제
      종료
   아니면
      이 오브젝트를 전역 인스턴스로 설정

2. 참조 캐싱하기()
   메인 카메라 = Camera.main 찾기
   보스 오브젝트 = "Boss"라는 이름으로 찾기
   보스 Transform = 보스 오브젝트의 위치 정보 저장


▶ Start() - Awake 직후 1회 실행
───────────────────────────────────────────────────────────────
1. 게임 데이터 불러오기()
   저장 파일 경로 = 애플리케이션 저장 폴더 + "/save.xml"
   
   만약 (저장 파일이 존재한다면)
      XML에서 데이터 불러오기()
   아니면
      PlayerPrefs에서 돈 정보 불러오기()

2. 직원 채우기()
   (저장된 직원 수만큼 화면에 직원 배치)


═══════════════════════════════════════════════════════════════
■ 매 프레임 실행 (Update)
═══════════════════════════════════════════════════════════════

▶ Update() - 매 프레임마다 실행
───────────────────────────────────────────────────────────────
1. UI 업데이트하기()
2. 입력 처리하기()
3. 버튼 활성화 상태 업데이트하기()
4. 층 생성 체크하기()


═══════════════════════════════════════════════════════════════
■ 저장/불러오기 시스템
═══════════════════════════════════════════════════════════════

▶ XML에서 데이터 불러오기()
───────────────────────────────────────────────────────────────
1. 저장 파일 경로 가져오기
2. XML 파일 읽기
3. 저장 데이터 적용하기:
   - 보유 돈 = 저장된 돈
   - 클릭 증가량 = 저장된 클릭 증가량
   - 클릭 레벨 = 저장된 레벨
   - 클릭 강화 비용 = 저장된 비용
   - 직원 수 = 저장된 직원 수


▶ PlayerPrefs에서 불러오기()
───────────────────────────────────────────────────────────────
1. "MONEY" 키로 저장된 문자열 가져오기 (없으면 "0")
2. 문자열을 숫자로 변환
3. 돈 = 변환된 숫자


▶ 게임 저장하기()
───────────────────────────────────────────────────────────────
1. 저장 데이터 객체 생성
2. 현재 게임 상태 저장:
   - 보유 돈
   - 클릭 증가량
   - 클릭 레벨
   - 클릭 강화 비용
   - 직원 수
3. XML 파일로 저장


═══════════════════════════════════════════════════════════════
■ 입력 처리 시스템
═══════════════════════════════════════════════════════════════

▶ 입력 처리하기()
───────────────────────────────────────────────────────────────
1. 돈 클릭 처리하기()
2. 종료 입력 처리하기()


▶ 돈 클릭 처리하기()
───────────────────────────────────────────────────────────────
만약 (마우스 왼쪽 버튼을 눌렀다 AND UI 위에 마우스가 없다)
   1. 마우스 위치 = 화면 좌표를 월드 좌표로 변환
   2. 마우스 위치에 돈 이펙트 생성
   3. 보유 돈 += 클릭당 증가 금액


▶ 종료 입력 처리하기()
───────────────────────────────────────────────────────────────
만약 (ESC 키를 눌렀다)
   1. 게임 저장하기()
   2. 애플리케이션 종료


▶ UI 위에 마우스가 있는지 체크()
───────────────────────────────────────────────────────────────
반환: EventSystem이 마우스가 UI 위에 있다고 판단하는가?
(UI 버튼을 잘못 클릭하는 것 방지)


═══════════════════════════════════════════════════════════════
■ 돈 시스템
═══════════════════════════════════════════════════════════════

▶ 돈 증가시키기()
───────────────────────────────────────────────────────────────
1. 마우스 위치 가져오기
2. 마우스 위치에 돈 이펙트 프리팹 생성
3. 보유 돈 += 클릭당 증가 금액


▶ 클릭 강화 업그레이드()
───────────────────────────────────────────────────────────────
만약 (보유 돈 < 업그레이드 비용)
   종료 (돈 부족)

아니면
   1. 보유 돈 -= 업그레이드 비용
   2. 클릭 레벨 += 1
   3. 클릭당 증가 금액 = 클릭 레벨 × 100
   4. 다음 업그레이드 비용 = 현재 비용 × 500


═══════════════════════════════════════════════════════════════
■ 직원 시스템
═══════════════════════════════════════════════════════════════

▶ 직원 채우기() - 게임 시작 시 저장된 직원 배치
───────────────────────────────────────────────────────────────
1. 현재 씬에 있는 모든 "Employee" 태그 오브젝트 찾기
2. 현재 직원 수 = 찾은 직원 오브젝트 개수

만약 (저장된 직원 수 > 현재 직원 수)
   for (i = 현재 직원 수; i < 저장된 직원 수; i++)
      인덱스 i 위치에 직원 생성하기()


▶ 직원 고용하기()
───────────────────────────────────────────────────────────────
만약 (보유 돈 < 직원 고용 비용)
   종료 (돈 부족)

아니면
   1. 보유 돈 -= 직원 고용 비용
   2. 직원 수 += 1
   3. 자동 수익 증가량 += (클릭 레벨 × 5)
   4. 다음 고용 비용 += (직원 수 × 500)
   5. 새 직원 생성하기()


▶ 직원 생성하기()
───────────────────────────────────────────────────────────────
인덱스 = 직원 수 - 1
인덱스 위치에 직원 생성하기(인덱스)


▶ 인덱스 위치에 직원 생성하기(인덱스)
───────────────────────────────────────────────────────────────
만약 (보스 위치가 없다면)
   종료

아니면
   1. 직원 위치 = 직원 위치 계산하기(인덱스)
   2. 계산된 위치에 직원 프리팹 생성


▶ 직원 위치 계산하기(인덱스)
───────────────────────────────────────────────────────────────
보스 위치 = 보스의 현재 위치

X 좌표 = 보스 X + (인덱스 % 가로 배치 수) × 간격
Y 좌표 = 보스 Y - (인덱스 / 가로 배치 수) × 간격

반환: (X 좌표, Y 좌표)

예시:
  가로 배치 수 = 6, 간격 = 1
  인덱스 0: (보스X + 0, 보스Y - 0) → 1줄 1번째
  인덱스 1: (보스X + 1, 보스Y - 0) → 1줄 2번째
  인덱스 6: (보스X + 0, 보스Y - 1) → 2줄 1번째


═══════════════════════════════════════════════════════════════
■ 층 시스템
═══════════════════════════════════════════════════════════════

▶ 층 생성 체크하기()
───────────────────────────────────────────────────────────────
다음 층 필요 직원 수 = 현재 층 × 층당 수용 인원

만약 (직원 수 >= 다음 층 필요 직원 수)
   새로운 층 생성하기()


▶ 새로운 층 생성하기()
───────────────────────────────────────────────────────────────
1. "Background" 오브젝트 찾기
   만약 (못 찾으면) 종료

2. 배경 위치 = 배경 오브젝트의 위치
3. 새 층 Y 좌표 = 배경 Y - (층 간격 × 현재 층)
4. 새 층 위치 = (배경 X, 새 층 Y 좌표)

5. 새 층 위치에 층 프리팹 생성
6. 현재 층 += 1
7. 카메라 제한 업데이트하기()


▶ 카메라 제한 업데이트하기()
───────────────────────────────────────────────────────────────
1. 카메라의 CameraDrag 컴포넌트 가져오기
   만약 (컴포넌트가 있다면)
      최소 Y 제한 -= 층 간격
      (카메라가 아래로 더 내려갈 수 있게)


═══════════════════════════════════════════════════════════════
■ UI 업데이트 시스템
═══════════════════════════════════════════════════════════════

▶ UI 업데이트하기()
───────────────────────────────────────────────────────────────
1. 돈 텍스트 업데이트하기()
2. 직원 텍스트 업데이트하기()
3. 패널 업데이트하기()


▶ 돈 텍스트 업데이트하기()
───────────────────────────────────────────────────────────────
만약 (돈 == 0)
   텍스트 = "0"
아니면
   텍스트 = "돈을 천 단위로 쉼표 구분하여 표시" + "원"

예시: 1000000 → "1,000,000원"


▶ 직원 텍스트 업데이트하기()
───────────────────────────────────────────────────────────────
만약 (직원 수 > 0)
   텍스트 = "직원 수를 천 단위로 쉼표 구분하여 표시" + "명"

예시: 150 → "150명"


▶ 버튼 활성화 상태 업데이트하기()
───────────────────────────────────────────────────────────────
1. 업그레이드 버튼:
   만약 (보유 돈 >= 업그레이드 비용)
      버튼 활성화
   아니면
      버튼 비활성화

2. 고용 버튼:
   만약 (보유 돈 >= 직원 고용 비용)
      버튼 활성화
   아니면
      버튼 비활성화


▶ 패널 업데이트하기()
───────────────────────────────────────────────────────────────
만약 (가격 패널이 열려있다면)
   업그레이드 패널 업데이트하기()

만약 (고용 패널이 열려있다면)
   고용 패널 업데이트하기()


▶ 업그레이드 패널 업데이트하기()
───────────────────────────────────────────────────────────────
1. 패널의 "Text" 자식 오브젝트 찾기
   만약 (못 찾으면) 종료

2. 텍스트 내용 설정:
   "Lv.[레벨] 클릭 강화
   
   현재 클릭 수익>
   [현재 증가량]원
   업그레이드 비용>
   [업그레이드 비용]원"


▶ 고용 패널 업데이트하기()
───────────────────────────────────────────────────────────────
1. 패널의 "Text" 자식 오브젝트 찾기
   만약 (못 찾으면) 종료

2. 텍스트 내용 설정:
   "Lv.[직원 수] 직원 고용
   
   현재 자동 클릭 수익>
   [자동 수익 증가량]원
   업그레이드 비용>
   [고용 비용]원"


▶ 패널 토글하기(패널)
───────────────────────────────────────────────────────────────
만약 (패널이 존재한다면)
   패널.활성화 상태 = !패널.활성화 상태
   (열려있으면 닫고, 닫혀있으면 열기)


═══════════════════════════════════════════════════════════════
■ 공개 속성 (다른 스크립트에서 접근 가능)
═══════════════════════════════════════════════════════════════

읽기 전용 Money → 현재 보유 돈
읽기 전용 MoneyIncreaseAmount → 클릭당 증가 금액
읽기 전용 EmployeeCount → 현재 직원 수


═══════════════════════════════════════════════════════════════
■ 전체 흐름도
═══════════════════════════════════════════════════════════════

게임 시작
   ↓
[Awake] 싱글톤 설정, 참조 캐싱
   ↓
[Start] 저장 데이터 불러오기, 직원 배치
   ↓
[Update 반복 시작]
   ↓
   ├─→ UI 업데이트 (돈, 직원 수 표시)
   ├─→ 입력 처리 (마우스 클릭, ESC)
   ├─→ 버튼 활성화 체크
   └─→ 층 생성 체크
   ↓
[사용자 액션]
   ├─→ 화면 클릭 → 돈 증가
   ├─→ 업그레이드 버튼 → 클릭 강화
   ├─→ 고용 버튼 → 직원 고용
   └─→ ESC 키 → 저장 후 종료


═══════════════════════════════════════════════════════════════
■ 핵심 로직 요약
═══════════════════════════════════════════════════════════════

1. 클릭 수익 시스템
   - 화면 클릭 → 돈 획득
   - 업그레이드로 클릭당 수익 증가
   - 비용은 기하급수적 증가 (×500)

2. 직원 시스템
   - 직원 고용 → 자동 수익 증가
   - 격자 형태로 배치 (가로 6명씩)
   - 아래로 계속 확장

3. 층 시스템
   - 6명당 1개 층 생성
   - 카메라가 아래로 이동 가능하도록 제한 조정

4. 저장/불러오기
   - XML 파일로 게임 상태 저장
   - ESC 키로 저장 후 종료


═══════════════════════════════════════════════════════════════
